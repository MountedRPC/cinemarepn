{% load static %}
<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>CinemaRepnik</title>
    <link rel="stylesheet" href="{% static 'css/styleMovies.css' %}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="{% static "css/mdb.min.css" %}" rel="stylesheet">

    {#    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"#}
    {#          integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">#}
    {#    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"#}
    {#            integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"#}
    {#            crossorigin="anonymous"></script>#}

    <!-- Font Awesome -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
            rel="stylesheet"
    />
    <!-- MDB -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
            rel="stylesheet"
    />
    <style>
        select option {
            background: #1D1D1D;
        }

        .form-selectMy {
            display: block;
            width: 75%;
            padding: 0.375rem 2.25rem 0.375rem 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.6;
            color: #4f4f4f;
            background-color: #fff;
        {#background-image: url(data:image/svg+xml;charset=utf-8,%3Csvg xmlns= 'http://www.w3.org/2000/svg' viewBox= '0 0 16 16' %3E%3Cpath fill= 'none' stroke= '%234f4f4f' stroke-linecap= 'round' stroke-linejoin= 'round' stroke-width= '2' d= 'M2 5l6 6 6-6' /%3E%3C/svg%3E);#} background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
            border: 1px solid #bdbdbd;
            border-radius: 0.25rem;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
    </style>
</head>
<body style="background: #1D1D1D;">
<header>

    <!--Navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top scrolling-navbar">
        <div class="container">
            <a class="navbar-brand" href="#" style="margin-right: 50px;">
                <strong><i class="fas fa-stream"></i> CinemaRepnik</strong>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-7"
                    aria-controls="navbarSupportedContent-7" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent-7">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item ">
                        <a class="nav-link" href="{% url 'home' %}">Home
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Movies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'cinemas' %}">Cinemas</a>
                    </li>
                    <li class="nav-item">
                            <a class="nav-link" href="{% url 'about_page' %}">About</a>
                    </li>
                </ul>
                {% if user.is_authenticated %}
                    <div class="md-form my-0" style="color:grey">
                        <button class="btn btn-light dropdown-toggle d-flex align-items-center hidden-arrow" href="#"
                                id="navbarDropdownMenuLink" role="button" data-mdb-toggle="dropdown"
                                aria-expanded="false"><i style="padding-right: 5px"
                                                         class="fas fa-user-circle"></i> {{ user }}
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                            <li>
                             <a class="dropdown-item" href="{% url 'profile_user' %}">My profile</a>
                            </li>

                            <li>
                                <a class="dropdown-item" href="{% url 'exit' %}">Logout</a>
                            </li>
                        </ul>
                    </div>
                {% else %}
                    <div class="md-form my-0">
                        <a class="btn-grey btn text-light" href="{% url 'login' %}">Sign In</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="view jarallax" data-jarallax='{"speed": 0.2}'
         style="background-image: url('{% static 'image/photo-1478720568477-152d9b164e26.jpg' %}'); background-repeat: no-repeat; background-size: cover; background-position: center center;">
        <div class="mask " style="background-color: rgba(0, 0, 0, 0.6)">
            <div class="container h-100 d-flex justify-content-center align-items-center">
                <div class="row pt-5 mt-3">
                    <div class="col-md-12 mb-3">
                        <div class="intro-info-content text-center">
                            <h1 class="display-3 mb-5 wow fadeInDown" style="color: white;" data-wow-delay="0.3s">
                                Movies
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Intro Section -->

</header>
<main>
    <div class="container">
        <section class="section pb-3 wow fadeIn" data-wow-delay="0.3s">
            <h1 class="font-weight-bold text-center h1 my-5 text-light">Now in cinemas</h1>
            <div class="container" style="margin-bottom: 20px">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-3 border p-3 border-light ">
                        <form action="" method="get">
                            <div class="input-group">
                                <select class="form-selectMy text-light" name="orderCinema" id="inputGroupSelect04"
                                        style="background: transparent;"
                                        aria-label="Example select with button addon">
                                    <option selected value="all">Choose Cinemas...</option>
                                    {% for cinema in Cinemas %}
                                        <option value="{{ cinema.id }}">{{ cinema.name_cinemas }}</option>
                                    {% endfor %}
                                </select>
                                <button style="margin: 0;height: 39.6px" type="submit"
                                        class="btn-grey waves-effec btn input-group-text border-0" id="search-addon"><i
                                        class="fas fa-home text-light" style="width: 12px;"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-3 border p-3">
                        <form action="" method="get">
                            <div class="input-group ">
                                <select class="form-selectMy text-light" id="inputGroupSelect04"
                                        style="background: transparent;" name="orderTime"
                                        aria-label="Example select with button addon">
                                    <option selected value="all">Choose Time...</option>
                                    <option value="1">07:00 - 11:59</option>
                                    <option value="2">12:00 - 16:59</option>
                                    <option value="3">17:00 - 21:59</option>
                                    <option value="4">22:00 - 06:59</option>
                                </select>
                                <button style="margin: 0;height: 39.6px" type="submit"
                                        class="btn-grey waves-effec btn input-group-text border-0" id="search-addon"><i
                                        class="far fa-clock text-light"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-3 border p-3">
                        <form action="" method="get">
                            <div class="input-group ">
                                <div class="form-outline form-white" style="width: 75%">
                                    <input type="search" name="search" id="search" class="form-control"/>
                                    <label class="form-label" for="search">Search</label>
                                </div>
                                <button style="margin: 0;height: 39.6px" type="submit"
                                        class="btn-grey waves-effec btn input-group-text border-0" id="search-addon"><i
                                        class="fas fa-search text-light"></i></button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="row d-flex justify-content-center infinite-container">
                {% for film in films_list %}
                    <div class="col-lg-3 col-md-6  d-flex justify-content-center infinite-item"
                         style="margin-top: 20px">
                        <div class="card  text-white"
                             style="background-color:#2e2d2d; width: 234px; border-radius: 15px;">
                            <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light"
                                 style=" border-radius: 15px 15px 0px 0px;">
                                <img src="{{ film.image_film }}" value="{{ film.id }}" class="img-fluid"/>
                                <a href="{% url 'details_films' film.id %}">
                                    <div class="mask" style="background-color: rgba(251, 251, 251, 0.15)"></div>
                                </a>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">{{ film.name_film }}</h5>
                                <p class="card-text">
                                    {{ film.short_info_film }}
                                </p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            {% if page_obj.has_next %}
                {% if SEARCH %}
                    <a class="infinite-more-link"
                       href="?search={{ search }}&page={{ page_obj.next_page_number }}"></a>
                {% elif orderCinema %}
                    <a class="infinite-more-link"
                       href="?orderCinema={{ orderCinema }}&page={{ page_obj.next_page_number }}"></a>
                {% elif orderTime %}
                    <a class="infinite-more-link"
                       href="?orderTime={{ orderTime }}&page={{ page_obj.next_page_number }}"></a>
                {% endif %}
                <a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}"></a>
                <div class="d-flex justify-content-center" style="display:none;">
                    <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            {% endif %}

        </section>
    </div>
</main>
<footer class="bg-dark text-center text-white" style="margin-top: 20px">
    <!-- Grid container -->
    <div class="container p-4 pb-0">
        <!-- Section: Social media -->
        <section class="mb-4">

            <!-- Google -->
            <a class="btn btn-outline-light btn-floating m-1" href="https://www.google.com/account/about/" role="button"
            ><i class="fab fa-google"></i
            ></a>

            <!-- Instagram -->
            <a class="btn btn-outline-light btn-floating m-1" href="https://www.instagram.com/ilya_chern1k/?hl=ru"
               role="button"
            ><i class="fab fa-instagram"></i
            ></a>

            <!-- Linkedin -->
            <a class="btn btn-outline-light btn-floating m-1"
               href="https://www.linkedin.com/in/%D0%B8%D0%BB%D1%8C%D1%8F-%D1%87%D0%B5%D1%80%D0%BD%D0%B8%D0%BA-390177222/"
               role="button"
            ><i class="fab fa-linkedin-in"></i
            ></a>
            <!-- Github -->
            <a class="btn btn-outline-light btn-floating m-1" href="https://github.com/MountedRPC" role="button"
            ><i class="fab fa-github"></i
            ></a>
        </section>
        <!-- Section: Social media -->
    </div>
    <!-- Grid container -->

    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        Â© 2021 CinemaRepnik
    </div>
    <!-- Copyright -->
</footer>

<script src="{% static 'js/jquery-2.2.4.min.js' %}"></script>
<script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'js/infinite.min.js' %}"></script>
<script>
    var infinite = new Waypoint.Infinite({
        element: $('.infinite-container')[0],
        handler: function (direction) {

        },
        offset: 'bottom-in-view',

        onBeforePageLoad: function () {
            $('.spinner-border').show();
        },
        onAfterPageLoad: function () {
            $('.spinner-border').hide();
        }

    });

</script>
<script
        type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"
></script>
<script type="text/javascript" src="{% static "js/jquery.min.js" %}"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="{% static "js/popper.min.js" %}"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="{% static "js/bootstrap.min.js" %}"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="{% static "js/mdb.min.js" %}"></script>
<script>
    new WOW().init();
</script>
</body>
</html>